
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
  
   function checkIsYourItem(){
 			return request.auth != null && resource.data.userId == request.auth.uid 
 		}
   function checkIsAdmin(){
 			return get(/databases/$(database)/documents/users/$(request.auth.uid)).data.isAdmin == true
 		}

    match /screams/{screamId}{
      allow read;
      allow create: if request.auth != null  
      allow update: if request.auth != null  
      allow delete: if checkIsYourItem() ||checkIsAdmin()
      }
      
    match /users/{userId} {
      allow read;
      allow create; 
      allow update, delete: if checkIsYourItem() ||checkIsAdmin()
      
      
       match /Private/{userId} {
      allow read: if checkIsAdmin()
      allow create; 
      allow update, delete: if checkIsYourItem() ||checkIsAdmin()
      }
  
      }
      
      
  
  match /projects/{projectId} {
      allow read;
      allow create: if request.auth != null  
      allow update, delete: if checkIsYourItem() ||checkIsAdmin()
      }
      
      match /likes/{likeId} {
      allow read;
      allow create: if request.auth != null  
      allow update, delete: if checkIsYourItem() ||checkIsAdmin()
      }
      
      match /comments/{commentId} {
      allow read;
      allow create: if request.auth != null  
      allow update, delete: if request.auth != null &&  checkIsAdmin()
      }
  
  
    
  }
}